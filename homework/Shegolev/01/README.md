# ДЗ №1. Суммирование «по строкам» vs «по столбцам»

## Заголовочные файлы
* `header.h` содержит определения `class Timer`, используемого для замера времени, и функции `recursive_fibonacci`, используемой для  «прогрева»
* `bench_param.h` содержит параметры бенчмарка: количество замеров, количество шагов, максимальную размерность, номер числа Фибоначчи

## Компиляция и исполнение
```
g++ prog.cpp -o prog --std=c++11 -O2
./prog >> prog.csv
```


## Ход бенчмарка
* Для прогрева рекурсивно вычисляется `fibonacci_number = 45`
* Инициализируется матрица размера `size` от 16 до `max_size = 16384` (`2^14`), это делается в основном цикле
* Для каждой размерности `size` делается несколько попыток замера: генерируется `number_of_attempts = 10` случайных матриц, заполняемых числами `rand() % 10 + 1`, для каждой такой матрицы замеряется время суммирования (его метод отражён в названии файла)
* Размерности случайных матриц меняются линейно `size += (int) (double) max_size / number_of_steps + 0.5`, в бенчмарке ``number_of_steps = 100``
* В стандартный поток в формате CSV печатаются: размерность `size`, номер попытки `attempt` и время
* Подобный бенчмарк на моём компьютере занимает 40 мин, перед коммитом в файле `bench_param.h` были заданы менее жёсткие параметры 

## Результаты
Алгоритм суммирования «по столбцам» по времени уступает суммированию «по строкам» в несколько раз. Время работы каждого алгоритма по-разному зависит от размерности. 

![alt text](https://github.com/mtrempoltsev/msu_cpp_spring_2018/blob/master/homework/Shegolev/01/images/absolute_time_plot.png?raw=true)

Отношение времён работы алгоритма «по столбцам» к «по строкам» (большее к меньшему) показывает, логарифмическую завимость. 

![alt text](https://github.com/mtrempoltsev/msu_cpp_spring_2018/blob/master/homework/Shegolev/01/images/relative_time_plot.png?raw=true)

## Объяснение
Вычисление «по строкам» более эффективно, поскольку элементы массива располагаются в памяти последовательно, и обращение к ним происходит последовательно, в то время как при суммировании «по столбцам» чтение ведётся из далёких участков памяти.
